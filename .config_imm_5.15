# ==================== 最终完美精简版 .config ====================
# ImmortalWrt 23.05 + Redmi AX6S + 极致省内存 + Argon主题全家桶 + OpenClash + zram
# 直接保存为 .config → make defconfig → make menuconfig（确认OpenClash版本）→ 编译即可
# ==============================================================

CONFIG_TARGET_mediatek=y
CONFIG_TARGET_mediatek_mt7622=y
CONFIG_TARGET_mediatek_mt7622_DEVICE_xiaomi_redmi-router-ax6s=y

CONFIG_LINUX_5_15=y
CONFIG_DEFAULT_TARGET_OPTIMIZATION="-Os -pipe -mcpu=cortex-a53"
CONFIG_KERNEL_CC_OPTIMIZE_FOR_SIZE=y
CONFIG_USE_GC_SECTIONS=y
CONFIG_USE_MKLIBS=y
CONFIG_USE_SSTRIP=y
CONFIG_STRIP_KERNEL_EXPORTS=y

# 内核极致精简（关闭所有调试）
CONFIG_KERNEL_DEBUG_KERNEL=n
CONFIG_KERNEL_DEBUG_INFO=n
CONFIG_KERNEL_KALLSYMS=n
CONFIG_KERNEL_DEBUG_FS=n
CONFIG_KERNEL_PRINTK=n
CONFIG_KERNEL_PRINTK_TIME=n
CONFIG_KERNEL_PROC_STRIPPED=y
CONFIG_KERNEL_FRAME_WARN=1024
CONFIG_KERNEL_KEXEC=n
CONFIG_KERNEL_COREDUMP=n
CONFIG_KERNEL_ELF_CORE=n
CONFIG_KERNEL_MAGIC_SYSRQ=n

# zram 开启（zstd压缩，效果最香）
CONFIG_ZRAM=y
CONFIG_ZRAM_DEF_COMP="zstd"
CONFIG_ZRAM_WRITEBACK=y
CONFIG_ZSMALLOC=y
CONFIG_ZPOOL=y
CONFIG_PACKAGE_zram-swap=y

# 基础核心功能
CONFIG_DEFAULT_luci=y
CONFIG_DEFAULT_luci-compat=y
CONFIG_DEFAULT_luci-lib-ipkg=y
CONFIG_DEFAULT_uhttpd=y
CONFIG_DEFAULT_uhttpd-mod-ubus=y
CONFIG_DEFAULT_dnsmasq-full=y
CONFIG_DEFAULT_firewall4=y
CONFIG_DEFAULT_nftables=y
CONFIG_DEFAULT_dropbear=y
CONFIG_DEFAULT_ppp=y
CONFIG_DEFAULT_ppp-mod-pppoe=y
CONFIG_DEFAULT_odhcp6c=y
CONFIG_DEFAULT_odhcpd-ipv6only=y
CONFIG_DEFAULT_wpad-openssl=y
CONFIG_DEFAULT_kmod-mt7915-firmware=y
CONFIG_DEFAULT_kmod-nft-offload=y

# Argon 主题完整套装（你最爱的！）
CONFIG_PACKAGE_luci-theme-argon=y
CONFIG_PACKAGE_luci-app-argon-config=y

# OpenClash（核心 + LuCI界面）
CONFIG_PACKAGE_luci-app-openclash=y
CONFIG_PACKAGE_openclash=y

# 其他必要小工具（建议保留）
CONFIG_PACKAGE_iwinfo=y
CONFIG_PACKAGE_iw=y
CONFIG_PACKAGE_uboot-envtools=y
CONFIG_PACKAGE_ubi-utils=y

# 时区
CONFIG_PACKAGE_zoneinfo-asia=y

# 已彻底移除的高内存占用包（放心用）
# CONFIG_PACKAGE_luci-app-cpufreq
# CONFIG_PACKAGE_luci-app-commands
# CONFIG_PACKAGE_luci-app-control-*
# CONFIG_PACKAGE_shellsync
# CONFIG_PACKAGE_bash
# CONFIG_PACKAGE_kmod-nf-nathelper
# CONFIG_PACKAGE_kmod-nf-nathelper-extra

# 结束
